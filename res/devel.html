<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--
#
# CherryMusic - a standalone music server
# Copyright (c) 2012 - 2014 Tom Wallroth & Tilman Boerner
#
# Project page:
#   http://fomori.org/cherrymusic/
# Sources on github:
#   http://github.com/devsnd/cherrymusic/
#
# CherryMusic is based on
#   jPlayer (GPL/MIT license) http://www.jplayer.org/
#   CherryPy (BSD license) http://www.cherrypy.org/
#
# licensed under GNU GPL version 3 (or later)
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>
#
-->
<link rel="icon" href="res/img/favicon32.png" type="image/png">
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

<!--LESS-TO-CSS-BEGIN out=res/bootstrap3/gen/cherrymusic.css-->
    <link href="res/bootstrap3/less/bootstrap.less" rel="stylesheet/less" />
<!--LESS-TO-CSS-END-->

<!--REMOVE-BEGIN-->
    <!-- live lesscss compiler for developement. will be removed by deploy.py -->
    <script type="text/javascript">var less=less||{};less.env='development';</script>
    <script type="text/javascript" src="res/bootstrap3/assets/less.js"></script>
<!--REMOVE-END-->

<!--COMPRESS-JS-BEGIN out=res/dist/cherrymusic.dist.js-->
    <script type="text/javascript" src="res/js/ext/angular.js"></script>
    <script type="text/javascript" src="res/js/ext/angular-resource.js"></script>
    <script type="text/javascript" src="res/js/ext/angular-sanitize.js"></script>
    <script type="text/javascript" src="res/js/ext/ui-bootstrap-tpls-0.14.3.js"></script>

    <script type="text/javascript" src="res/js/ext/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="res/js/ext/json2.min.js"></script>
    <script type="text/javascript" src="res/js/ext/jquery.jplayer.js"></script>
    <script type="text/javascript" src="res/js/ext/jplayer.playlist.js"></script>
    <script type="text/javascript" src="res/js/ext/jquery.jplayer.inspector.js"></script>
    <script type="text/javascript" src="res/js/ext/mustache-0.7.0.js"></script>
    <!-- ui sortable -->
    <script type="text/javascript" src="res/js/ext/jquery-ui.js"></script>

    <script type="text/javascript" src="res/bootstrap3/js/modal.js"></script>
    <script type="text/javascript" src="res/bootstrap3/js/collapse.js"></script>
    <script type="text/javascript" src="res/bootstrap3/js/transition.js"></script>
    <script type="text/javascript" src="res/bootstrap3/js/dropdown.js"></script>
    <script type="text/javascript" src="res/bootstrap3/js/alert.js"></script>

    <!-- cherrymusic -->
    <script type="text/javascript" src="res/js/playlistmanager.js"></script>
    <script type="text/javascript" src="res/js/mediabrowser.js"></script>
    <script type="text/javascript" src="res/js/cherrymusic.js"></script>

    <script type="text/javascript" src="res/js/services/util_service.js"></script>
    <script type="text/javascript" src="res/js/services/notification_service.js"></script>
    <script type="text/javascript" src="res/js/services/legacy_api_service.js"></script>
    <script type="text/javascript" src="res/js/services/config_service.js"></script>
    <script type="text/javascript" src="res/js/services/user_option_service.js"></script>
    <script type="text/javascript" src="res/js/services/auth_service.js"></script>
    <script type="text/javascript" src="res/js/services/motd_service.js"></script>
    <script type="text/javascript" src="res/js/services/focus_service.js"></script>
    <script type="text/javascript" src="res/js/services/file_browse_service.js"></script>
    <script type="text/javascript" src="res/js/services/admin_service.js"></script>

    <script type="text/javascript" src="res/js/directives/motd.js"></script>
    <script type="text/javascript" src="res/js/directives/busy.js"></script>
    <script type="text/javascript" src="res/js/directives/notification.js"></script>
<!--COMPRESS-JS-END-->

<title>CherryMusic</title>
</head>
<body ng-controller="MainViewController" ng-app="CherryMusicClient">
<!--ABOUT -->
<div class="modal fade" id="aboutModal">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>About CherryMusic</h3>
        </div>
        <div class="modal-body">
            <div class="content">
                <img src="res/img/cherrymusic_logo_big.png" style="float: right;"/>
                <p>CherryMusic was created by <a href="http://github.com/devsnd">Tom Wallroth</a>
                and is currently developed together with <a href="http://github.com/tilboerner">Tilman B&ouml;rner</a>.</p>
                <p>Visit the <a href="http://www.fomori.org/cherrymusic">CherryMusic website</a> or get the <a href="http://www.github.com/devsnd/cherrymusic">source-code directly from github</a></p>
                <p>thanks to</p>
                <ul>
                    <li><a href="www.cherrypy.org">The CherryPy team</a> for a great application server</li>
                    <li><a href="http://www.happyworm.com/">HappyWorm</a> for the HTML5 audio playback</li>
                    <li><a href="http://www.komponist-cmb.de">Christian Maximilian Blasius</a> for the idea for the logo!</li>
                    <li><a href="http://twitter.github.com/bootstrap/">Bootstrap</a> for the nice look'n'feel of the UI</li>
                    <li>6arms1leg for maintaining the package for Arch Linux</li>
                    <li>Adrian Sampson for <a href="https://github.com/sampsyo/audioread">audioread</a></li>
                </ul>
                CherryMusic © 2012&ndash;2014
                <p>version <span id="cherrymusic-version" class="badge"></span></p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
    </div>
    </div>
</div>
<!-- ABOUT END -->
<!--keyboard shortcut changer overlay -->
<div id="shortcut-changer" style="display:none;">
    <span></span>
    <input value="" onkeyup="" />
</div>
<!--keyboard shortcut changer overlay end -->
<!-- export playlists -->
<div id="exportPlaylists" class="modal fade">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>create playlist archive</h3>
        </div>
        <div class="modal-body">
            <div class="content">
            <form class="" action="export_playlists" method="GET" target="_blank">
                <div class="form-group">
                    Playlist file format:
                    <div class="radio-inline">
                        <label class="radio-inline">
                            <input type="radio" name="format" value="m3u" checked/> m3u
                        </label>
                    </div>
                    <div class="radio-inline">
                        <label class="radio-inline">
                            <input type="radio" name="format" value="pls"/> pls
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" name="all" value="True"/>
                            include other people's public playlists
                        </label>
                    </div>
                </div>
                <div class="form-actions">
                    <input type="hidden" name="hostaddr" value=""/>
                    <a href="javascript:;" onclick="userExportPlaylists()" class="btn btn-default">
                        export playlists as ZIP file
                    </a>
                </div>
            </form>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
    </div>
    </div>
</div>
<!-- export playlists end -->
<!-- change albumart -->
<div id="changeAlbumArt" class="modal fade">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>change album art</h3>
            <p>for folder</p>
            <div class='foldername'></div>
        </div>
        <div class="modal-body">
            <div class="content">
                <div class="form-group">
                    <label for="albumart-search-term" class="col-lg-3 control-label" >Search for art:</label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control" id="albumart-search-term">
                    </div>
                    <div class="col-lg-2">
                        <div class="btn btn-default" onclick="searchAlbumArt()">search</div>
                    </div>
                </div>
                <div class="coverart-tryout">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
    </div>
    </div>
</div>
    <!-- change password end -->
<!-- USER OPTIONS END-->

<!-- SAVE PLAYLIST MODAL -->
<div id="saveplaylistmodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="saveplaylistmodalLabel" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="saveplaylistmodalLabel">Save new playlist</h3>
        </div>
        <div class="modal-body">
                <div class="control-group">
                    <label for="playlisttitle">Playlist title</label>
                    <input id="playlisttitle" type="text" class="form-control" placeholder="Your playlist title">
                </div>
                <div class="control-group">
                    <div class="controls">
                        <input id="playlistpublic" type="checkbox" class="input-xlarge">  visible for other users
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">cancel</button>
            <a class="btn btn-primary" onclick="savePlaylistAndHideDialog(); return false;">Save playlist</a>
        </div>
    </div>
    </div>
</div>
<!-- SAVE PLAYLIST MODAL END -->

<!-- DELETE PLAYLIST MODAL -->
<div id="deleteplaylistmodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="deleteplaylistmodalLabel" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="deleteplaylistmodalLabel">Delete playlist</h3>
        </div>
        <div class="modal-body">
            <p>Do you really want to delete this precious playlist?</p>
        </div>
        <div class="modal-footer">
            <a id="deletePlaylistConfirmButton" data-dismiss="modal" aria-hidden="true" class="btn btn-danger">Yes, get it out of my life</a>
            <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">No, leave it as it is</button>
        </div>
    </div>
    </div>
</div>
<!-- DELETE PLAYLIST MODAL END -->

<!-- JPLAYER START -->
 <div class="cm-songtitle-container">
    <div class="cm-songtitle"></div>
</div>
<div id="mediawrapper">
    <div id="mediaplayer">
        <img id="albumart"/>
        <div id="jquery_jplayer_1" class="jp-jplayer">
        </div>
        <div id="jp_ancestor" class="jp-audio">
            <div class="jp-type-playlist">
                <div class="jp-gui jp-interface">
                    <div class="jp-center-progress-bar pointer">
                        <div class="jp-progress progress cm-seekbar">
                            <div class="jp-seek-bar progress progress-bar jp-bar-seek">
                                <div class="jp-play-bar progress-bar jp-bar-played">
                                </div>
                            </div>
                        </div>
                        <div class="jp-time-holder">
                            <div class="jp-current-time"></div>
                            <div class="jp-duration"></div>
                        </div>
                    </div>
                    <div class="jp-control-buttons">
                        <ul class="jp-controls">
                            <li><a href="javascript:;" class="jp-previous btn btn-default" tabindex="1">
                                <span class="glyphicon glyphicon-step-backward"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-play  btn btn-default" tabindex="1">
                                <span class="glyphicon glyphicon-play"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-pause btn btn-default" tabindex="1">
                                <span class="glyphicon glyphicon-pause"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-next btn btn-default" tabindex="1">
                                <span class="glyphicon glyphicon-step-forward"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-stop btn btn-default" tabindex="1">
                                <span class="glyphicon glyphicon-stop"></span>
                            </a></li>
                            <li>
                            </li>
                        </ul>
                        <ul class="jp-volume-toggles">
                            <li><a href="javascript:;" class="jp-mute btn btn-default btn-xs" tabindex="1" title="mute">
                                <span class="glyphicon glyphicon-volume-off"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-unmute btn btn-default btn-xs" tabindex="1" title="unmute">
                                <span class="glyphicon glyphicon-volume-down"></span>
                            </a></li>
                            <li><a href="javascript:;" class="jp-volume-max btn btn-default btn-xs" tabindex="1" title="max volume">
                                <span class="glyphicon glyphicon-volume-up"></span>
                            </a></li>
                            <li>
                                <div class="jp-volume-bar progress pointer">
                                    <div class="jp-volume-bar-value progress-bar"></div>
                                </div>
                            </li>
                        </ul>
                    </div>


                    <div class="cm-playlistplaytime"></div>

                    <ul class="jp-toggles">
                        <li><a href="javascript:;" class="jp-shuffle btn btn-default btn-xs" tabindex="1" title="turn shuffle on">
                            <span class="glyphicon glyphicon-random"></span>
                        </a></li>
                        <li><a href="javascript:;" class="jp-shuffle-off btn btn-default btn-xs" tabindex="1" title="turn shuffle off">
                            <span class="glyphicon glyphicon-arrow-right"></span>
                        </a></li>
                        <li><a href="javascript:;" class="jp-repeat btn btn-default btn-xs" tabindex="1" title="activate repeat">
                            <span class="glyphicon glyphicon-retweet"></span>
                        </a></li>
                        <li><a href="javascript:;" class="jp-repeat-off btn btn-default btn-xs" tabindex="1" title="deactivate repeat off">
                            <span class="glyphicon glyphicon-arrow-down"></span>
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- JPLAYER END -->

<!-- UPPER NAVIGATION ELEMENTS -->
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a ng-click="openAboutModal()" class="navbar-brand">
        <span class="hidden-xs">Cherry&nbsp;&nbsp;Music</span>
    </a>
    <div class="visible-xs">
        <form class="navbar-form navbar-left" role="search" id="searchform" onsubmit="return search($(this))">
            <div class="input-group">
                <input
                    type="text"
                    name="searchinput"
                    class="searchinput form-control"
                    ng-model="searchField"
                    placeholder="{{ searchPlaceholder }}">
                <span class="input-group-btn">
                    <button
                        type="submit"
                        ng-click="search(searchField)"
                        class="btn btn-primary">
                        Search
                    </button>
                </span>
            </div>
        </form>
    </div>
  </div>

  <div class="collapse navbar-collapse navbar-ex1-collapse" id="searchfield">
    <ul class="nav navbar-nav">
        <li class="hidden-xs">
            <form class="navbar-form navbar-left">
                <!--workaround for CHROME BUG  https://code.google.com/p/chromium/issues/detail?id=309483 -->
                <div class="input-group" style="width: 260px">
                    <input
                        type="text"
                        name="searchinput"
                        id="searchinput"
                        class="searchinput form-control"
                        ng-model="searchField"
                        placeholder="{{ searchPlaceholder }}">
                    <span class="input-group-btn">
                        <button
                            type="submit"
                            class="btn btn-primary"
                            ng-click="search(searchField)">
                        Search
                        </button>
                    </span>
                </div>
            </form>
        </li>
        <li>
            <a ng-click="loadBrowser()">browse files</a>
        </li>
        <li>
            <a ng-click="showPlaylists('default')">load playlist</a>
        </li>
    </ul>
    <ul class="nav navbar-nav">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <b class="caret"></b><span class="glyphicon glyphicon-wrench"></span>
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a ng-click="openUserOptionModal()">Options</a>
                </li>
                <li ng-if="currentUserIsAdmin()">
                    <a ng-click="openAdminModal()">Admin</a>
                </li>
                <li class="divider"></li>
                <li>
                    <a 
                        ng-disabled="autoLoginEnabled()"
                        ng-click="logout()">
                        Logout
                        (<span id="username-label">{{ getCurrentUserName() }}</span>)
                    </a>
                </li>
            </ul>
        </li>
    </ul>

  </div>
</div>
<!-- END UPPER NAVIGATION ELEMENTS -->

<!-- NOTIFICATIONS -->
<div id="errormessage">
    <div ng-repeat="notification in getNotifications() track by notification.id">
        <cm-notification notification="notification">        
    </div>
</div>
<!-- NOTIFICATIONS END -->

<!-- TABS START -->
<div class="">
    <div class="row">
        <div id="search-panel" class="col-md-6 row">
            <!--SEARCH TAB START -->
            <div class="search" cm-busy="mediaBrowserBusy">
                <div class="search-results">
                    <div id="motd">
                        <cm-message-of-the-day>
                    </div>
                </div>
            </div>
            <!--SEARCH TAB END -->
        </div>
        <div id="playlist-panel" class="col-md-6 row">
            <!-- PLAYLIST TAB START -->
            <div id="jplayer">
                <div id="over-playlist-tabs">
                    <div id="playlistChooser"><ul class="playlist-tab-list nav nav-tabs"></ul></div>
                </div>
                <div id="playlistCommands" class="playlist-tab-border-left">
                    <div class="playlist-command-buttons row">
                        <div id="playlist-command-button-group" class="pull-left btn-group">
                            <button class="btn dropdown-toggle btn-default btn-xs" data-toggle="dropdown">
                                sort <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a tabindex="-1" href="javascript:void(0)"
                                       onclick="playlistManager.getEditingPlaylist().sort_by('track')">by track number</a></li>
                                <li><a tabindex="-1" href="javascript:void(0)"
                                       onclick="playlistManager.getEditingPlaylist().sort_by('title')">by title</a></li>
                                <li><a tabindex="-1" href="javascript:void(0)"
                                       onclick="playlistManager.getEditingPlaylist().sort_by('artist')">by artist</a></li>
                            </ul>
                        </div>
                        <a show-cond="queue" class="pull-left btn btn-xs btn-default" onclick="randomPlaylist(); return false;" >random!</a>
                        <a show-cond="queue" id="save-playlist-from-queue" href="#saveplaylistmodal"  data-toggle="modal" class="pull-left new-playlist-from-queue btn btn-xs btn-default">save as playlist</a>
                        <div show-cond="queue" class="btn-group pull-right">
                            <button class="clear-playlist btn btn-xs btn-default"
                               onclick="playlistManager.clearQueue(); return false;">clear</button>
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a class="remove-played-tracks"
                                       onclick="playlistManager.removePlayedFromPlaylist(); return false;" >remove played</a>
                                </li>
                            </ul>
                        </div>
                        <div show-cond="playlist" id="playlist-command-button-group" class="pull-left btn-group">
                            <button show-cond="playlist not-saved" class="btn save-current-playlist-button btn btn-xs btn-default">save</button>
                            <button class="btn dropdown-toggle btn-default btn-xs" data-toggle="dropdown">
                                edit <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="#saveplaylistmodal" data-toggle="modal" class="save-as-new-playlist-button" tabindex="-1" href="#">Save as new playlist</a></li>
                                <li class="divider"></li>
                                <li><a class="delete-playlist-button" tabindex="-1" href="#">Delete playlist</a></li>
                                <li><a class="toggle-public-private-playlist" tabindex="-1" href="#"></a></li>
                            </ul>
                        </div>
                        <a class="btn btn-xs btn-default pull-left" show-cond="user-may-download" onclick="download_editing_playlist()">download</a>
                        <form style="display: none" id="download-redirect" method="post" action="download">
                            <input id="download-redirect-files" type="text" name="value" value="" />
                        </form>
                    </div>
                    <div class="playlist-progress row">
                        <span class="remaining-tracks-or-time bottom-corners label"></span>
                        <div class="playlist-progress-bar progress" style="height: 3px;">
                            <div class="progress-bar" style="width: '+parseInt(100-proc*100)+'%;"></div>
                        </div>
                    </div>
                </div>
                <div class="playlist-container-parent playlist-tab-border-left"></div>
                <div id="playlistBrowser">
                    <div class="available-playlists" style="display: none">
                    </div>
                </div>
            </div>
            <!-- PLAYLIST TAB END -->
        </div>
    </div>
</div>
<!-- TABS END -->
<div id="jplayer_inspector"></div>
</body>
</html>
